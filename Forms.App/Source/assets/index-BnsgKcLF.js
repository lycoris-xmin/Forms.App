import{d as T,D as N,E,c as K,o as B,w as o,f as e,e as w,B as D,aB as L,q as M,s as U,i as V,b as $,h as s,a8 as z,a9 as O}from"./index-C4fDvJn1.js";import{_ as q,a as W,b as j,T as G,u as H,c as J,d as Q,e as X,f as Y}from"./table-search-filter-oeJAv4cw.js";import{u as Z,A as ee}from"./app.permissions-eEP3QY97.js";import{P as te}from"./enum-map-friend-Ciom99R_.js";import{u as oe,F as ae,_ as ne,I as se}from"./form-C4lsPmD3.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-Bz2yjPM1.js";import{_ as re}from"./index-Bgjt1Cd5.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ie}from"./index-CfF1NG6B.js";import{f as de,a as ue}from"./friend-CGimM8fP.js";import{D as ce}from"./DeleteOutlined-vV5-dJ7B.js";import{T as me}from"./index-Cd0TkKik.js";import"./EyeOutlined-DMOywdMm.js";import"./index-tKWHzGWZ.js";import"./LeftOutlined-byKmxFgc.js";import"./responsiveObserve-k0SNxmCv.js";import"./index-BSgdO99v.js";import"./debounce-C-eHgR1J.js";import"./isSymbol-7IJmde0n.js";import"./enums-Cr_YM2zq.js";const pe={class:"flex-1"},fe={class:"w-full flex-y-center justify-end gap-12px"},_e=T({name:"FriendListSearch",__name:"search-filter",props:{model:{required:!0},modelModifiers:{}},emits:N(["reset","search"],["update:model"]),setup(I,{emit:c}){const{formRef:m,validate:v,resetFields:p}=oe(),l=E(I,"model"),f=c;async function y(){await p(),f("reset")}async function _(){await v(),f("search")}return(C,a)=>{const d=ne,g=re,i=se,b=W,x=D,k=j,A=q,R=ae;return B(),K(G,null,{default:o(()=>[e(R,{ref_key:"formRef",ref:m,model:l.value,"label-col":{span:5,md:7}},{default:o(()=>[e(A,{gutter:[16,16],wrap:""},{default:o(()=>[e(g,{span:24,md:12,lg:6},{default:o(()=>[e(d,{label:"好友",name:"id",class:"m-0"},{default:o(()=>[e(le,{value:l.value.id,"onUpdate:value":a[0]||(a[0]=u=>l.value.id=u),placeholder:"- 全部 -"},null,8,["value"])]),_:1})]),_:1}),e(g,{span:24,md:12,lg:6},{default:o(()=>[e(d,{label:"店铺名称",name:"shopName",class:"m-0"},{default:o(()=>[e(i,{value:l.value.shopName,"onUpdate:value":a[1]||(a[1]=u=>l.value.shopName=u),placeholder:"可模糊查询"},null,8,["value"])]),_:1})]),_:1}),w("div",pe,[e(d,{class:"m-0"},{default:o(()=>[w("div",fe,[e(x,{onClick:y},{icon:o(()=>[e(b,{class:"align-sub text-icon"})]),default:o(()=>[a[2]||(a[2]=w("span",{class:"ml-8px"},"重置",-1))]),_:1}),e(x,{type:"primary",ghost:"",onClick:_},{icon:o(()=>[e(k,{class:"align-sub text-icon"})]),default:o(()=>[a[3]||(a[3]=w("span",{class:"ml-8px"},"搜索",-1))]),_:1})])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1})}}}),ge=S(_e,[["__scopeId","data-v-2fd96526"]]),xe={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},he=T({name:"friend_audit",__name:"index",setup(I){const c=L(),m=M(),v=Z(),p=U({rowId:"",resetLoading:!1,rowDetail:{},expandedRowKeys:[],settingDrawerVisible:!1,auditDrawerVisible:!1}),{tableWrapperRef:l,scrollConfig:f}=H(),{columns:y,data:_,getData:C,getDataByPage:a,loading:d,mobilePagination:g,searchParams:i,resetSearchParams:b,reloadColumns:x}=J({apiFn:de,apiParams:{pageIndex:1,pageSize:10},columns:u}),{rowSelection:k,onDeleted:A}=Q(_,C);V(async()=>{c.params&&c.params.status===1&&(i.status=1),x()});async function R(r){const{data:t,error:n}=await ue([r]);!n&&t&&t.code===0&&A()}function u(){const r=[{key:"platform",dataIndex:"platform",title:"平台",align:"center",width:120,customRender:({record:t})=>{const n=te.find(F=>F.value===t.platform);return e(me,{color:n==null?void 0:n.color},{default:()=>[n==null?void 0:n.label]})}},{key:"店铺名称",dataIndex:"shopName",title:"店铺名称",width:180},{key:"好友昵称",dataIndex:"nickName",title:"好友昵称",width:170},{key:"createTime",dataIndex:"createTime",title:"审核时间",align:"center",width:170}];return r.push({key:"operate",title:"操作",align:"center",width:100,fixed:"right",customRender:({record:t})=>e("div",{class:"flex-center gap-4px"},[P(t)])}),r}function P(r){return!v.hasOne(ee.Friend.Audit.DELETE)||!m.userInfo.isTenant?"":e(Y,{title:"确认删除吗？",onConfirm:()=>R(r.id)},{default:()=>[e(O,{placement:"top",title:"删除"},{default:()=>[e(D,{danger:!0,size:"small",type:"link"},{default:()=>[e(ce,null,null)]})]})]})}return(r,t)=>{const n=X,F=ie;return B(),$("div",xe,[e(ge,{model:s(i),"onUpdate:model":t[0]||(t[0]=h=>z(i)?i.value=h:null),"user-info":s(m).userInfo,onReset:s(b),onSearch:t[1]||(t[1]=h=>s(a)(1))},null,8,["model","user-info","onReset"]),e(F,{title:"好友列表",bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"device-card flex-col-stretch sm:flex-1-hidden card-wrapper"},{default:o(()=>[e(n,{ref_key:"tableWrapperRef",ref:l,"expanded-row-keys":p.expandedRowKeys,"onUpdate:expandedRowKeys":t[2]||(t[2]=h=>p.expandedRowKeys=h),columns:s(y),"data-source":s(_),size:"small","row-selection":s(k),scroll:s(f),loading:s(d),"row-key":"id",pagination:s(g),class:"h-full"},null,8,["expanded-row-keys","columns","data-source","row-selection","scroll","loading","pagination"])]),_:1})])}}}),Ue=S(he,[["__scopeId","data-v-5ebca371"]]);export{Ue as default};
