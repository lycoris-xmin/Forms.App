import{f as m,Y as j,Z as M,a0 as p,a1 as O,d as N,S as R,U,a6 as y,W as A,bt as $,c6 as B,al as P,as as _,r as D,i as L,ch as V,y as X,ao as Y}from"./index-C4fDvJn1.js";import{S as W}from"./index-CfF1NG6B.js";const z=t=>{const{value:n,formatter:e,precision:o,decimalSeparator:s,groupSeparator:u="",prefixCls:c}=t;let r;if(typeof e=="function")r=e({value:n});else{const i=String(n),f=i.match(/^(-?)(\d*)(\.(\d+))?$/);if(!f)r=i;else{const d=f[1];let a=f[2]||"0",l=f[4]||"";a=a.replace(/\B(?=(\d{3})+(?!\d))/g,u),typeof o=="number"&&(l=l.padEnd(o,"0").slice(0,o>0?o:0)),l&&(l=`${s}${l}`),r=[m("span",{key:"int",class:`${c}-content-value-int`},[d,a]),l&&m("span",{key:"decimal",class:`${c}-content-value-decimal`},[l])]}}return m("span",{class:`${c}-content-value`},[r])};z.displayName="StatisticNumber";const Z=t=>{const{componentCls:n,marginXXS:e,padding:o,colorTextDescription:s,statisticTitleFontSize:u,colorTextHeading:c,statisticContentFontSize:r,statisticFontFamily:i}=t;return{[`${n}`]:p(p({},O(t)),{[`${n}-title`]:{marginBottom:e,color:s,fontSize:u},[`${n}-skeleton`]:{paddingTop:o},[`${n}-content`]:{color:c,fontSize:r,fontFamily:i,[`${n}-content-value`]:{display:"inline-block",direction:"ltr"},[`${n}-content-prefix, ${n}-content-suffix`]:{display:"inline-block"},[`${n}-content-prefix`]:{marginInlineEnd:e},[`${n}-content-suffix`]:{marginInlineStart:e}}})}},q=j("Statistic",t=>{const{fontSizeHeading3:n,fontSize:e,fontFamily:o}=t,s=M(t,{statisticTitleFontSize:e,statisticContentFontSize:n,statisticFontFamily:o});return[Z(s)]}),E=()=>({prefixCls:String,decimalSeparator:String,groupSeparator:String,format:String,value:_([Number,String,Object]),valueStyle:{type:Object,default:void 0},valueRender:P(),formatter:B(),precision:Number,prefix:$(),suffix:$(),title:$(),loading:A()}),v=N({compatConfig:{MODE:3},name:"AStatistic",inheritAttrs:!1,props:R(E(),{decimalSeparator:".",groupSeparator:",",loading:!1}),slots:Object,setup(t,n){let{slots:e,attrs:o}=n;const{prefixCls:s,direction:u}=U("statistic",t),[c,r]=q(s);return()=>{var i,f,d,a,l,S,g;const{value:H=0,valueStyle:I,valueRender:w}=t,x=s.value,h=(i=t.title)!==null&&i!==void 0?i:(f=e.title)===null||f===void 0?void 0:f.call(e),b=(d=t.prefix)!==null&&d!==void 0?d:(a=e.prefix)===null||a===void 0?void 0:a.call(e),F=(l=t.suffix)!==null&&l!==void 0?l:(S=e.suffix)===null||S===void 0?void 0:S.call(e),k=(g=t.formatter)!==null&&g!==void 0?g:e.formatter;let C=m(z,y({"data-for-update":Date.now()},p(p({},t),{prefixCls:x,value:H,formatter:k})),null);return w&&(C=w(C)),c(m("div",y(y({},o),{},{class:[x,{[`${x}-rtl`]:u.value==="rtl"},o.class,r.value]}),[h&&m("div",{class:`${x}-title`},[h]),m(W,{paragraph:!1,loading:t.loading},{default:()=>[m("div",{style:I,class:`${x}-content`},[b&&m("span",{class:`${x}-content-prefix`},[b]),C,F&&m("span",{class:`${x}-content-suffix`},[F])])]})]))}}}),G=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function J(t,n){let e=t;const o=/\[[^\]]*]/g,s=(n.match(o)||[]).map(i=>i.slice(1,-1)),u=n.replace(o,"[]"),c=G.reduce((i,f)=>{let[d,a]=f;if(i.includes(d)){const l=Math.floor(e/a);return e-=l*a,i.replace(new RegExp(`${d}+`,"g"),S=>{const g=S.length;return l.toString().padStart(g,"0")})}return i},u);let r=0;return c.replace(o,()=>{const i=s[r];return r+=1,i})}function K(t,n){const{format:e=""}=n,o=new Date(t).getTime(),s=Date.now(),u=Math.max(o-s,0);return J(u,e)}const Q=1e3/30;function T(t){return new Date(t).getTime()}const tt=()=>p(p({},E()),{value:_([Number,String,Object]),format:String,onFinish:Function,onChange:Function}),et=N({compatConfig:{MODE:3},name:"AStatisticCountdown",props:R(tt(),{format:"HH:mm:ss"}),setup(t,n){let{emit:e,slots:o}=n;const s=D(),u=D(),c=()=>{const{value:a}=t;T(a)>=Date.now()?r():i()},r=()=>{if(s.value)return;const a=T(t.value);s.value=setInterval(()=>{u.value.$forceUpdate(),a>Date.now()&&e("change",a-Date.now()),c()},Q)},i=()=>{const{value:a}=t;s.value&&(clearInterval(s.value),s.value=void 0,T(a)<Date.now()&&e("finish"))},f=a=>{let{value:l,config:S}=a;const{format:g}=t;return K(l,p(p({},S),{format:g}))},d=a=>a;return L(()=>{c()}),V(()=>{c()}),X(()=>{i()}),()=>{const a=t.value;return m(v,y({ref:u},p(p({},Y(t,["onFinish","onChange"])),{value:a,valueRender:d,formatter:f})),o)}}});v.Countdown=et;v.install=function(t){return t.component(v.name,v),t.component(v.Countdown.name,v.Countdown),t};v.Countdown;export{v as S};
